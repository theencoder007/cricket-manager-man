<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket Manager Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .welcome-screen {
            text-align: center;
            padding: 60px 20px;
        }

        .welcome-screen h1 {
            font-size: 3.5em;
            color: #0f2027;
            margin-bottom: 20px;
        }

        .welcome-screen .subtitle {
            font-size: 1.5em;
            color: #666;
            margin-bottom: 40px;
        }

        .cricket-icon {
            font-size: 5em;
            margin-bottom: 30px;
        }

        .google-btn {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            padding: 15px 40px;
            background: white;
            color: #444;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 500;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .google-btn:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transform: translateY(-2px);
            border-color: #4285f4;
        }

        .setup-screen {
            display: none;
            max-width: 600px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .setup-screen.active {
            display: block;
        }

        .setup-screen h2 {
            color: #0f2027;
            margin-bottom: 30px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }

        .color-options {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .color-option {
            width: 100%;
            height: 50px;
            border-radius: 6px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .color-option.selected {
            border-color: #0f2027;
            transform: scale(1.1);
        }

        .game-screen {
            display: none;
        }

        .game-screen.active {
            display: block;
        }

        .user-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid #0f2027;
        }

        .user-details h3 {
            color: #0f2027;
            margin-bottom: 3px;
        }

        .user-details p {
            color: #666;
            font-size: 0.9em;
        }

        .logout-btn {
            padding: 10px 20px;
            background: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: #d32f2f;
        }

        h1 {
            text-align: center;
            color: #0f2027;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .team-name {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.2em;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #ddd;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab:hover {
            color: #0f2027;
        }

        .tab.active {
            color: #0f2027;
            border-bottom-color: #0f2027;
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #0f2027;
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .rating {
            display: inline-block;
            padding: 4px 10px;
            background: #4CAF50;
            color: white;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .rating.high {
            background: #4CAF50;
        }

        .rating.medium {
            background: #FF9800;
        }

        .rating.low {
            background: #f44336;
        }

        button {
            padding: 12px 30px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }

        button:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .match-result {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #4CAF50;
        }

        .match-result h3 {
            color: #2e7d32;
            margin-bottom: 10px;
        }

        .score {
            font-size: 1.8em;
            font-weight: bold;
            color: #0f2027;
            text-align: center;
            margin: 15px 0;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card p {
            opacity: 0.9;
        }

        .your-team {
            background: #e3f2fd;
        }

        .role {
            font-size: 0.85em;
            color: #666;
            font-style: italic;
        }

        .features-list {
            text-align: left;
            max-width: 600px;
            margin: 40px auto;
            background: #f9f9f9;
            padding: 30px;
            border-radius: 8px;
        }

        .features-list h3 {
            color: #0f2027;
            margin-bottom: 20px;
            text-align: center;
        }

        .features-list ul {
            list-style: none;
        }

        .features-list li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
            color: #444;
        }

        .features-list li:before {
            content: "üèè";
            position: absolute;
            left: 0;
        }

        .status-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 8px;
        }

        .status-fit {
            background: #4CAF50;
            color: white;
        }

        .status-injured {
            background: #f44336;
            color: white;
        }

        .status-hot {
            background: #FF5722;
            color: white;
        }

        .status-cold {
            background: #2196F3;
            color: white;
        }

        .transfer-market {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .player-card {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: white;
            transition: all 0.3s;
        }

        .player-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .player-card h4 {
            color: #0f2027;
            margin-bottom: 10px;
        }

        .player-card .price {
            color: #4CAF50;
            font-weight: bold;
            font-size: 1.2em;
            margin-top: 10px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
        }

        .modal-content h3 {
            color: #0f2027;
            margin-bottom: 20px;
        }

        .training-options {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .training-option {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .training-option:hover {
            border-color: #4CAF50;
            background: #f1f8f4;
        }

        .training-option h4 {
            color: #0f2027;
            margin-bottom: 5px;
        }

        .training-option p {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="welcomeScreen" class="welcome-screen">
            <div class="cricket-icon">üèè</div>
            <h1>Cricket Manager</h1>
            <p class="subtitle">Build Your Dream Team!</p>
            
            <div class="features-list">
                <h3>Game Features</h3>
                <ul>
                    <li>Create and customize your team</li>
                    <li>Buy and sell players</li>
                    <li>Train players to improve skills</li>
                    <li>Multiple match formats</li>
                    <li>Player injuries and form</li>
                    <li>Detailed statistics</li>
                </ul>
            </div>

            <button class="google-btn" onclick="loginWithGoogle()">Sign in to Play</button>
        </div>

        <div id="setupScreen" class="setup-screen">
            <h2>Create Your Team</h2>
            <form onsubmit="completeSetup(event)">
                <div class="form-group">
                    <label>Team Name</label>
                    <input type="text" id="teamNameInput" placeholder="Enter your team name" required>
                </div>
                
                <div class="form-group">
                    <label>Choose Team Color</label>
                    <div class="color-options" id="colorOptions">
                        <div class="color-option selected" style="background: #e74c3c;" data-color="#e74c3c"></div>
                        <div class="color-option" style="background: #3498db;" data-color="#3498db"></div>
                        <div class="color-option" style="background: #2ecc71;" data-color="#2ecc71"></div>
                        <div class="color-option" style="background: #f39c12;" data-color="#f39c12"></div>
                        <div class="color-option" style="background: #9b59b6;" data-color="#9b59b6"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Match Format</label>
                    <select id="formatSelect">
                        <option value="t20">T20 (20 Overs)</option>
                        <option value="odi">ODI (50 Overs)</option>
                        <option value="test">Test Match</option>
                    </select>
                </div>

                <button type="submit" style="width: 100%; margin-top: 20px;">Start Managing!</button>
            </form>
        </div>

        <div id="gameScreen" class="game-screen">
            <div class="user-info">
                <div class="user-profile">
                    <img id="userAvatar" class="user-avatar" src="" alt="User">
                    <div class="user-details">
                        <h3 id="userName"></h3>
                        <p id="userEmail"></p>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>

            <h1>üèè <span id="displayTeamName">Cricket Manager</span></h1>
            <div class="team-name">Manager: <strong id="managerName"></strong> | Budget: <strong id="budgetDisplay">$10M</strong></div>

            <div class="stats">
                <div class="stat-card">
                    <h3 id="matchDay">1</h3>
                    <p>Match Day</p>
                </div>
                <div class="stat-card">
                    <h3 id="points">0</h3>
                    <p>Points</p>
                </div>
                <div class="stat-card">
                    <h3 id="position">8th</h3>
                    <p>Position</p>
                </div>
                <div class="stat-card">
                    <h3 id="wins">0</h3>
                    <p>Wins</p>
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showTab('squad')">Squad</button>
                <button class="tab" onclick="showTab('stats')">Statistics</button>
                <button class="tab" onclick="showTab('transfer')">Transfers</button>
                <button class="tab" onclick="showTab('training')">Training</button>
                <button class="tab" onclick="showTab('table')">Table</button>
                <button class="tab" onclick="showTab('match')">Match</button>
            </div>

            <div id="squad" class="tab-content active">
                <h2>Your Squad</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Role</th>
                            <th>Rating</th>
                            <th>Form</th>
                            <th>Status</th>
                            <th>Playing XI</th>
                        </tr>
                    </thead>
                    <tbody id="squadTable"></tbody>
                </table>
            </div>

            <div id="stats" class="tab-content">
                <h2>Player Statistics</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Matches</th>
                            <th>Runs</th>
                            <th>Avg</th>
                            <th>Wickets</th>
                        </tr>
                    </thead>
                    <tbody id="statsTable"></tbody>
                </table>
            </div>

            <div id="transfer" class="tab-content">
                <h2>Transfer Market</h2>
                <p style="margin-bottom: 20px;">Budget: $<span id="transferBudget">10.0</span>M</p>
                <div class="controls">
                    <button onclick="showMarket('buy')">Buy Players</button>
                    <button onclick="showMarket('sell')">Sell Players</button>
                </div>
                <div id="transferContent"></div>
            </div>

            <div id="training" class="tab-content">
                <h2>Training Center</h2>
                <p style="margin-bottom: 20px;">Select a player to train</p>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Role</th>
                            <th>Rating</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="trainingTable"></tbody>
                </table>
            </div>

            <div id="table" class="tab-content">
                <h2>Points Table</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Pos</th>
                            <th>Team</th>
                            <th>Played</th>
                            <th>Won</th>
                            <th>Lost</th>
                            <th>Points</th>
                        </tr>
                    </thead>
                    <tbody id="leagueTable"></tbody>
                </table>
            </div>

            <div id="match" class="tab-content">
                <h2>Next Match</h2>
                <div id="matchInfo"></div>
                <div class="controls">
                    <button onclick="playMatch()" id="playBtn">Play Match</button>
                </div>
                <div id="matchResult"></div>
            </div>
        </div>

        <div id="trainingModal" class="modal">
            <div class="modal-content">
                <h3>Train <span id="trainingPlayerName"></span></h3>
                <div class="training-options">
                    <div class="training-option" onclick="trainPlayer('batting')">
                        <h4>Batting Training</h4>
                        <p>Improve batting (+1-3 rating)</p>
                        <p><strong>Cost: $0.5M</strong></p>
                    </div>
                    <div class="training-option" onclick="trainPlayer('bowling')">
                        <h4>Bowling Training</h4>
                        <p>Improve bowling (+1-3 rating)</p>
                        <p><strong>Cost: $0.5M</strong></p>
                    </div>
                    <div class="training-option" onclick="trainPlayer('fitness')">
                        <h4>Fitness Training</h4>
                        <p>Heal injuries</p>
                        <p><strong>Cost: $0.3M</strong></p>
                    </div>
                </div>
                <button onclick="closeTrainingModal()" style="width: 100%; background: #666;">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let gameState = null;
        let selectedColor = '#e74c3c';
        let selectedPlayerForTraining = null;

        const playerNames = ['Virat Kumar', 'Rohit Sharma', 'KL Patel', 'Hardik Singh', 'Ravindra Jadav',
            'Shreyas Iyer', 'Rishabh Das', 'Jasprit Khan', 'Mohammed Ashwin', 'Yuzvendra Chahal',
            'Bhuvneshwar Kumar', 'Shikhar Gill', 'Suryakumar Yadav', 'Kuldeep Sharma', 'Deepak Chahar',
            'Prithvi Shaw', 'Ishan Kishan', 'Axar Patel', 'Shardul Thakur', 'Umesh Yadav'];

        function initColorPicker() {
            const colorOptions = document.querySelectorAll('.color-option');
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    colorOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedColor = this.getAttribute('data-color');
                });
            });
        }

        window.onload = function() {
            initColorPicker();
        };

        function loginWithGoogle() {
            const name = prompt("Enter your name:");
            const email = prompt("Enter your email:");
            
            if (name && email) {
                currentUser = {
                    name: name,
                    email: email,
                    avatar: `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=0f2027&color=fff&size=100`
                };
                
                loadUserData();
                
                if (!gameState || !gameState.squad || gameState.squad.length === 0) {
                    showSetupScreen();
                } else {
                    showGameScreen();
                }
            }
        }

        function showSetupScreen() {
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('setupScreen').classList.add('active');
        }

        function generateSquad() {
            const roles = ['Batsman', 'Batsman', 'Batsman', 'Wicket-Keeper', 'All-Rounder', 'All-Rounder', 
                          'Bowler', 'Bowler', 'Bowler', 'Bowler', 'Bowler'];
            const squad = [];
            const usedNames = [];
            
            for (let i = 0; i < 15; i++) {
                let name;
                do {
                    name = playerNames[Math.floor(Math.random() * playerNames.length)];
                } while (usedNames.includes(name));
                usedNames.push(name);
                
                const role = i < 11 ? roles[i] : roles[Math.floor(Math.random() * roles.length)];
                squad.push({
                    name: name,
                    role: role,
                    rating: 70 + Math.floor(Math.random() * 15),
                    starting: i < 11,
                    form: 'normal',
                    injured: false,
                    injuryWeeks: 0,
                    matches: 0,
                    runs: 0,
                    wickets: 0
                });
            }
            return squad;
        }

        function generateMarketPlayers() {
            const market = [];
            const usedNames = gameState.squad.map(p => p.name);
            
            for (let i = 0; i < 10; i++) {
                let name;
                do {
                    name = playerNames[Math.floor(Math.random() * playerNames.length)];
                } while (usedNames.includes(name) || market.find(p => p.name === name));
                
                const roles = ['Batsman', 'Bowler', 'All-Rounder', 'Wicket-Keeper'];
                const role = roles[Math.floor(Math.random() * roles.length)];
                const rating = 65 + Math.floor(Math.random() * 20);
                
                market.push({
                    name: name,
                    role: role,
                    rating: rating,
                    price: ((rating - 60) * 0.2 + 1).toFixed(1),
                    form: 'normal',
                    injured: false,
                    injuryWeeks: 0,
                    matches: 0,
                    runs: 0,
                    wickets: 0
                });
            }
            return market;
        }

        function completeSetup(e) {
            e.preventDefault();
            
            const teamName = document.getElementById('teamNameInput').value;
            const format = document.getElementById('formatSelect').value;
            
            gameState = {
                matchDay: 1,
                yourTeam: teamName,
                teamColor: selectedColor,
                matchFormat: format,
                budget: 10.0,
                squad: generateSquad(),
                teams: [
                    {name: teamName, played: 0, won: 0, lost: 0, nr: 0, runsFor: 0, ballsFor: 0, runsAgainst: 0, ballsAgainst: 0, points: 0},
                    {name: 'Mumbai Indians', played: 0, won: 0, lost: 0, nr: 0, runsFor: 0, ballsFor: 0, runsAgainst: 0, ballsAgainst: 0, points: 0},
                    {name: 'Chennai Kings', played: 0, won: 0, lost: 0, nr: 0, runsFor: 0, ballsFor: 0, runsAgainst: 0, ballsAgainst: 0, points: 0},
                    {name: 'Delhi Capitals', played: 0, won: 0, lost: 0, nr: 0, runsFor: 0, ballsFor: 0, runsAgainst: 0, ballsAgainst: 0, points: 0},
                    {name: 'Kolkata Riders', played: 0, won: 0, lost: 0, nr: 0, runsFor: 0, ballsFor: 0, runsAgainst: 0, ballsAgainst: 0, points: 0},
                    {name: 'Punjab Kings', played: 0, won: 0, lost: 0, nr: 0, runsFor: 0, ballsFor: 0, runsAgainst: 0, ballsAgainst: 0, points: 0},
                    {name: 'Rajasthan Royals', played: 0, won: 0, lost: 0, nr: 0, runsFor: 0, ballsFor: 0, runsAgainst: 0, ballsAgainst: 0, points: 0},
                    {name: 'Sunrisers Hyderabad', played: 0, won: 0, lost: 0, nr: 0, runsFor: 0, ballsFor: 0, runsAgainst: 0, ballsAgainst: 0, points: 0}
                ],
                fixtures: [],
                marketPlayers: []
            };
            
            gameState.marketPlayers = generateMarketPlayers();
            generateFixtures();
            saveUserData();
            
            document.getElementById('setupScreen').classList.remove('active');
            showGameScreen();
        }

        function showGameScreen() {
            document.getElementById('gameScreen').classList.add('active');
            
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userEmail').textContent = currentUser.email;
            document.getElementById('userAvatar').src = currentUser.avatar;
            document.getElementById('displayTeamName').textContent = gameState.yourTeam;
            document.getElementById('managerName').textContent = currentUser.name;
            document.getElementById('budgetDisplay').textContent = '$' + gameState.budget.toFixed(1) + 'M';
            document.getElementById('transferBudget').textContent = gameState.budget.toFixed(1);
            
            renderSquad();
            renderStats();
            renderTrainingTable();
            updateLeagueTable();
            updateMatchInfo();
            updateWins();
        }

        function logout() {
            if (confirm('Your progress is saved. Logout?')) {
                currentUser = null;
                gameState = null;
                document.getElementById('gameScreen').classList.remove('active');
                document.getElementById('welcomeScreen').style.display = 'block';
            }
        }

        function loadUserData() {
            const savedData = localStorage.getItem(`cricketManager_${currentUser.email}`);
            if (savedData) {
                gameState = JSON
